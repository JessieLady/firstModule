<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerenciador de Tarefas</title>

    <link
      rel="shortcut icon"
      href="../assets/circle-check-regular.svg"
      type="image/x-icon"
    />

    <link rel="stylesheet" href="main.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
      defer
    ></script>

    <script src="https://kit.fontawesome.com/232e2c38d5.js" crossorigin="anonymous"></script>

      <script src="main.js" defer></script>

  </head>

  <body onload="getTasks(); weatherInfo(); tasksPagesTotal()"><!-- How to make the darkmode stay turned on?switchMode() -->
    <div class="div-purple" id="div-purple"></div>
    <div class="div-grey" id="div-grey"></div>

    <div class="div-white" id="div-white">

      <header id="header">

        <div id="logout">
          <a href="../login-page/index.html"><button id="logoutButton">Sair</button></a><!-- put in here the REAL LOGOUT!!! -->
        </div>

        <div id="logo">
          <img id="logoArnia" src="../assets/logo-purple.svg" alt="Logo Arnia" />
        </div>

        <div id="page-title">
          <i class="fa-regular fa-clipboard fa-xl"></i>
          <span class="mb-3">Gerenciador de Tarefas</span><br />
          <button id="newTaskButton" class="mt-3" onclick="openModal('modalNewTask')">+ Adicionar Nova Tarefa</button>
        </div>

        <div id="weather">
            <div id="firstLine">
              <span class="color-orange">Olá,</span> <span id="weatherName">&#32;</span>
            </div>
          <div id="secondLine">
            <div id="weatherTemp" class="color-orange">&#32;</div>
            <div id="weatherCity">&#32;</div>
            <div id="weatherCond">&#32;</div>
          </div>
            <!-- <div id="weatherHour">&#32;</div>
            <div id="weatherDate">&#32;</div> -->
          
        </div>

        <div id="darkMode">
          <div id="darkModeContent" onclick="switchMode()"><img width="25px" id="iconMode" src="../assets/moon.svg"></div>
        </div>

      </header>

      <div class="div-orange" id="div-orange"></div>
    </div><!-- div-white ending -->

    <main>
      <div id="tableHeader"  class="d=flex flex-row justify-content-between flex-nowrap">

        <div id="buttonsFilter">
          <button onclick="getTasks()" id="btnAll">Todas</button>
          <button id="btnToday" onclick="todayTasks()">Hoje</button>
          <button onclick="filterTasks('Em progresso')" id="btnRunning">Em Progresso</button>
          <button onclick="filterTasks('Em pausa')" id="btnPause">Em Pausa</button>
          <button onclick="filterTasks('Concluído')" id="btnFinished">Concluído</button>
          <button id="btnLate" onclick="lateTasks()">Atrasado</button>
        </div>

        <div id="searchTasks">
          <div id="magnifyingGlass"><i class="fa-solid fa-magnifying-glass"></i></div>
          <div>
            <input id="searchField" name="search" type="search" placeholder="Pesquise aqui">
          </div>
        </div>
      </div>

      <div id="content">
        <table class="table table-responsive" id="table"><!-- Study table proprieties. Sorry! I'm sleepy table-striped table-hover-->
          <thead id="tHead" class="font-weight-bold">
            <tr>
              <th scope="col">Núm<i class="fa-solid fa-caret-down"></i></th><!-- add button sort -->
              <th scope="col">Descrição<i class="fa-solid fa-caret-down"></i></th>
              <th scope="col">Data de Entrega</th>
              <th scope="col">Status</th>
              <th scope="col">Ação</th>
            </tr>
          </thead>
          <tbody id="tbody-content">
          </tbody>
        </table>
      </div><!-- content ending -->

      <div id="buttonsPaging">
        <div id="previousPage" class="pagingButtons" onclick="previousPage()">
          <i class="fa-solid fa-chevron-left"></i> Anterior 
        </div>
        <div id="pagesNum">
          <span id="currentPage">1 </span>/<span id="pagesLength">4</span>
        </div>
        <div id="nextPage" class="pagingButtons" onclick="nextPage()">
          Próximo <i class="fa-solid fa-chevron-right"></i>
        </div>
      </div>
      <div id="footerHelp">
        <p id="footerHelpContent" onclick="openModal('modalHelp')">Tenho um problema com a minha conta!</p>
      </div>

    <!-- MODALS SECTION -->
    
      <div id="modalNewTask" class="modalMain">
        <div id="modalNewTaskContent" class="modalBack-light downToUpAnimation">
          <h5 class="mb-3 h5style">Adicionar nova tarefa</h5>

          <div class="closeButton" onclick="closeModal('modalNewTask')">&times;</div>

          <form id="form">
            <div>
              <label for="number">Número</label><br />
              <input type="number" min="0" id="number" name="number"/>
              <small>&nbsp;</small>
            </div>
            <br>
            <div>
              <label for="description">Descrição</label>
              <input type="text" placeholder="Ex: ligar para Amanda" id="description" name="description"/>
              <small>&nbsp;</small>
            </div>
            <br>
            <div>
              <label for="date">Data</label> 
              <br>
              <input type="date" name="date" id="date"/>
                <small>&nbsp;</small>
            </div>
            <br>
            <div>
              <label for="status">Status</label>
              <br>
              <select name="status">
                <option disabled selected>
                  Escolha uma opção
                </option>
                <option value="Em progresso">Em Progresso</option>
                <option value="Em pausa">Em Pausa</option>
                <option value="Concluído">Concluído</option>
              </select>
                <small id="statusSmall">&nbsp;</small>
            </div>
            <br>
            <div id="modal-footer">
              <button id="cancelButton" type="reset" onclick="closeModal('modalNewTask')">Cancelar</button>
              <button id="submitButton" type="submit" >Salvar</button>
          </div>
          </form>
        </div>
      </div><!-- Modal ending -->

      <div id="modalConfirmation" class="modalMain">
        <div id="modalConfirmationContent" class="downToUpAnimation">

        <div class="closeButtonDelete" onclick="closeModal('modalConfirmation')">&times;</div>

        <div id="confirm"><h3>Você deseja excluir esta tarefa?</h3></div>

        <div id="buttonsConfirmation">
          <button id="buttonYes">Sim</button>
          <button onclick="closeModal('modalConfirmation')">Não</button>
        </div>

      </div>
      </div>

      <div id="modalHelp" class="modalMain">
        <div id="modalHelpContent" class="downToUpAnimation">

          <div id="helpTitle">
            <h3>Tenho um problema com:</h3>
          </div>

          <div id="helpBody">
          <div>
            <button class="mb-3" onclick="openModal('modalEditConfirm');closeModal('modalHelp')">Dados da minha conta</button>
          </div>
          <div>
            <button class="mb-3 deleteAccount" onclick="confirmDeleteUser()">Excluir minha conta</button>
          </div>          
        </div>
        <span class="closeButton" onclick="closeModal('modalHelp')">&times;</span>
        </div>
        
      </div><!-- final do modalHelp -->

      <div id="modalEditConfirm" class="modalMain"><!-- don't forget to close the helpModal -->
        <div id="modalEditConfirmContent" class="downToUpAnimation">
          <span class="closeButton" onclick="closeModal('modalEditConfirm')">&times;</span>
          <h4 class="mt-4">Alteração de Informação da Conta:</h4>
          <label class="mb-2" id="passwordConfirm" for="passwordConfirm">Por favor, insira sua senha</label>
          <input id="passwordConfirm" name="passwordConfirm" type="password">
          <small>&nbsp;</small>
          <button id="editButton">Alterar</button>
        </div>
      </div>

      <div id="modalEditInfo" class="modalMain">
        <div id="modalEditInfoContent" class="downToUpAnimation">
            <span class="closeButton" onclick="closeModal('modalEditInfo')">&times;</span>
            <form id="formEdit">
                <div class="d-flex flex-column mt-3">
                    <label for="name">Nome</label>
                    <input id="name" name="name" type="text">
                </div>
                <div class="d-flex flex-column mt-3">
                    <label for="city">Cidade</label>
                    <input id="city" name="city" type="text">
                </div>
                <div class="d-flex flex-column mt-3">
                    <label for="login">Login</label>
                    <input id="login" name="login" type="text">
                </div>
                <div class="d-flex flex-column mt-3">
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email">
                </div>
                <div class="d-flex flex-column mt-3">
                    <label for="password">Senha</label>
                    <input id="password" name="password" type="password">
                </div>
                <div class="d-flex flex-column">
                    <button type="submit" class="mt-3">Alterar</button>
                </div>
            </form>
        </div>
    </div>

      <div id="modalDeleteConfirm" class="modalMain">
        <div id="modalDeleteConfirmContent" class="downToUpAnimation">
          <span class="closeButton" onclick="closeModal('modalDeleteConfirm')">&times;</span>
          <h2><strong>Ah! mas você já vai?</strong></h2>
          <h4>Isso irá deletar suas tarefas e seus dados</h4>
          <h5>Por favor, insira sua senha para <br> confirmar a exclusão da sua conta</h5>
          <label class="mb-2" for="passConfirmDelete">Sua senha</label>
          <input id="passConfirmDelete" name="passConfirmDelete" type="password">
          <small>&nbsp;</small>
          <button id="deleteButton">Confirmar Exclusão</button>
          <button onclick="closeModal('modalDeleteConfirm')">Cancelar</button>
          
        </div>
      </div>

      <div id="modalInfo" class="upToDownAnimation">
        <div id="modalInfoContent">
          <span class="closeButton" onclick="closeModal('modalInfo')">&times;</span>
            <h3 id="textModalInfo">Alteração realizada com sucesso!</h3>
        </div>
      </div>

    </main>
  </body>
</html>